{"ast":null,"code":"import _asyncToGenerator from \"D:/yqwwant/.vscode/.vscode/TodoList\\u8BB0\\u4E8B\\u672C/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"D:/yqwwant/.vscode/.vscode/TodoList\\u8BB0\\u4E8B\\u672C/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n\nvar _tabsEmits;\n\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport { Fragment, defineComponent, getCurrentInstance, ref, onUpdated, onMounted, watch, nextTick, provide, h, renderSlot } from 'vue';\nimport { isPromise, NOOP } from '@vue/shared';\nimport '../../../utils/index.mjs';\nimport '../../../constants/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { Plus } from '@element-plus/icons-vue';\nimport '../../../tokens/index.mjs';\nimport TabNav from './tab-nav.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props.mjs';\nimport { UPDATE_MODEL_EVENT, INPUT_EVENT } from '../../../constants/event.mjs';\nimport { tabsRootContextKey } from '../../../tokens/tabs.mjs';\nimport { EVENT_CODE } from '../../../constants/aria.mjs';\nvar tabsProps = buildProps({\n  type: {\n    type: String,\n    values: [\"card\", \"border-card\", \"\"],\n    \"default\": \"\"\n  },\n  activeName: {\n    type: String,\n    \"default\": \"\"\n  },\n  closable: Boolean,\n  addable: Boolean,\n  modelValue: {\n    type: [String, Number],\n    \"default\": \"\"\n  },\n  editable: Boolean,\n  tabPosition: {\n    type: String,\n    values: [\"top\", \"right\", \"bottom\", \"left\"],\n    \"default\": \"top\"\n  },\n  beforeLeave: {\n    type: definePropType(Function),\n    \"default\": function _default() {\n      return true;\n    }\n  },\n  stretch: Boolean\n});\nvar tabsEmits = (_tabsEmits = {}, _defineProperty(_tabsEmits, UPDATE_MODEL_EVENT, function (tabName) {\n  return typeof tabName === \"string\" || typeof tabName === \"number\";\n}), _defineProperty(_tabsEmits, INPUT_EVENT, function (tabName) {\n  return typeof tabName === \"string\" || typeof tabName === \"number\";\n}), _defineProperty(_tabsEmits, \"tab-click\", function tabClick(pane, ev) {\n  return ev instanceof Event;\n}), _defineProperty(_tabsEmits, \"edit\", function edit(paneName, action) {\n  return action === \"remove\" || action === \"add\";\n}), _defineProperty(_tabsEmits, \"tab-remove\", function tabRemove(paneName) {\n  return typeof paneName === \"string\" || typeof paneName === \"number\";\n}), _defineProperty(_tabsEmits, \"tab-add\", function tabAdd() {\n  return true;\n}), _tabsEmits);\n\nvar getPaneInstanceFromSlot = function getPaneInstanceFromSlot(vnode) {\n  var paneInstanceList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var children = vnode.children || [];\n  Array.from(children).forEach(function (node) {\n    var type = node.type;\n    type = type.name || type;\n\n    if (type === \"ElTabPane\" && node.component) {\n      paneInstanceList.push(node.component);\n    } else if (type === Fragment || type === \"template\") {\n      getPaneInstanceFromSlot(node, paneInstanceList);\n    }\n  });\n  return paneInstanceList;\n};\n\nvar Tabs = defineComponent({\n  name: \"ElTabs\",\n  props: tabsProps,\n  emits: tabsEmits,\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots,\n        expose = _ref.expose;\n    var instance = getCurrentInstance();\n    var nav$ = ref();\n    var panes = ref([]);\n    var currentName = ref(props.modelValue || props.activeName || \"0\");\n    var paneStatesMap = {};\n\n    var updatePaneInstances = function updatePaneInstances() {\n      var isForceUpdate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (slots[\"default\"]) {\n        var children = instance.subTree.children;\n        var content = Array.from(children).find(function (_ref2) {\n          var props2 = _ref2.props;\n          return (props2 == null ? void 0 : props2[\"class\"]) === \"el-tabs__content\";\n        });\n        if (!content) return;\n        var paneInstanceList = getPaneInstanceFromSlot(content).map(function (paneComponent) {\n          return paneStatesMap[paneComponent.uid];\n        });\n        var panesChanged = !(paneInstanceList.length === panes.value.length && paneInstanceList.every(function (pane, index) {\n          return pane.uid === panes.value[index].uid;\n        }));\n\n        if (isForceUpdate || panesChanged) {\n          panes.value = paneInstanceList;\n        }\n      } else if (panes.value.length !== 0) {\n        panes.value = [];\n      }\n    };\n\n    var changeCurrentName = function changeCurrentName(value) {\n      currentName.value = value;\n      emit(INPUT_EVENT, value);\n      emit(UPDATE_MODEL_EVENT, value);\n    };\n\n    var setCurrentName = function setCurrentName(value) {\n      var _a;\n\n      if (currentName.value === value) return;\n      var canLeave = (_a = props.beforeLeave) == null ? void 0 : _a.call(props, value, currentName.value);\n\n      if (isPromise(canLeave)) {\n        canLeave.then(function () {\n          var _a2, _b;\n\n          changeCurrentName(value);\n          (_b = (_a2 = nav$.value) == null ? void 0 : _a2.removeFocus) == null ? void 0 : _b.call(_a2);\n        }, NOOP);\n      } else if (canLeave !== false) {\n        changeCurrentName(value);\n      }\n    };\n\n    var handleTabClick = function handleTabClick(tab, tabName, event) {\n      if (tab.props.disabled) return;\n      setCurrentName(tabName);\n      emit(\"tab-click\", tab, event);\n    };\n\n    var handleTabRemove = function handleTabRemove(pane, ev) {\n      if (pane.props.disabled) return;\n      ev.stopPropagation();\n      emit(\"edit\", pane.props.name, \"remove\");\n      emit(\"tab-remove\", pane.props.name);\n    };\n\n    var handleTabAdd = function handleTabAdd() {\n      emit(\"edit\", null, \"add\");\n      emit(\"tab-add\");\n    };\n\n    onUpdated(function () {\n      return updatePaneInstances();\n    });\n    onMounted(function () {\n      return updatePaneInstances();\n    });\n    watch(function () {\n      return props.activeName;\n    }, function (modelValue) {\n      return setCurrentName(modelValue);\n    });\n    watch(function () {\n      return props.modelValue;\n    }, function (modelValue) {\n      return setCurrentName(modelValue);\n    });\n    watch(currentName, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var _a, _b;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              updatePaneInstances(true);\n              _context.next = 3;\n              return nextTick();\n\n            case 3:\n              _context.next = 5;\n              return (_a = nav$.value) == null ? void 0 : _a.$nextTick();\n\n            case 5:\n              (_b = nav$.value) == null ? void 0 : _b.scrollToActiveTab();\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n    provide(tabsRootContextKey, {\n      props: props,\n      currentName: currentName,\n      updatePaneState: function updatePaneState(pane) {\n        return paneStatesMap[pane.uid] = pane;\n      }\n    });\n    expose({\n      currentName: currentName\n    });\n    return function () {\n      var _class;\n\n      var newButton = props.editable || props.addable ? h(\"span\", {\n        \"class\": \"el-tabs__new-tab\",\n        tabindex: \"0\",\n        onClick: handleTabAdd,\n        onKeydown: function onKeydown(ev) {\n          if (ev.code === EVENT_CODE.enter) handleTabAdd();\n        }\n      }, [h(ElIcon, {\n        \"class\": \"is-icon-plus\"\n      }, {\n        \"default\": function _default() {\n          return h(Plus);\n        }\n      })]) : null;\n      var header = h(\"div\", {\n        \"class\": [\"el-tabs__header\", \"is-\".concat(props.tabPosition)]\n      }, [newButton, h(TabNav, {\n        currentName: currentName.value,\n        editable: props.editable,\n        type: props.type,\n        panes: panes.value,\n        stretch: props.stretch,\n        ref: nav$,\n        onTabClick: handleTabClick,\n        onTabRemove: handleTabRemove\n      })]);\n      var panels = h(\"div\", {\n        \"class\": \"el-tabs__content\"\n      }, [renderSlot(slots, \"default\")]);\n      return h(\"div\", {\n        \"class\": (_class = {\n          \"el-tabs\": true,\n          \"el-tabs--card\": props.type === \"card\"\n        }, _defineProperty(_class, \"el-tabs--\".concat(props.tabPosition), true), _defineProperty(_class, \"el-tabs--border-card\", props.type === \"border-card\"), _class)\n      }, props.tabPosition !== \"bottom\" ? [header, panels] : [panels, header]);\n    };\n  }\n});\nexport { Tabs as default, tabsEmits, tabsProps };","map":{"version":3,"mappings":"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","names":["tabsProps","buildProps","type","String","values","activeName","closable","Boolean","addable","modelValue","Number","editable","tabPosition","beforeLeave","definePropType","Function","stretch","tabsEmits","UPDATE_MODEL_EVENT","tabName","INPUT_EVENT","pane","ev","Event","paneName","action","getPaneInstanceFromSlot","vnode","paneInstanceList","children","Array","from","forEach","node","name","component","push","Fragment","defineComponent","props","emits","setup","emit","slots","expose","instance","getCurrentInstance","nav$","ref","panes","currentName","paneStatesMap","updatePaneInstances","isForceUpdate","subTree","content","find","props2","map","paneComponent","uid","panesChanged","length","value","every","index","changeCurrentName","setCurrentName","_a","canLeave","call","isPromise","then","_a2","_b","removeFocus","NOOP","handleTabClick","tab","event","disabled","handleTabRemove","stopPropagation","handleTabAdd","onUpdated","onMounted","watch","nextTick","$nextTick","scrollToActiveTab","provide","tabsRootContextKey","updatePaneState","newButton","h","tabindex","onClick","onKeydown","code","EVENT_CODE","enter","ElIcon","Plus","header","TabNav","onTabClick","onTabRemove","panels","renderSlot"],"sources":["../../../../../../packages/components/tabs/src/tabs.ts"],"sourcesContent":["import {\n  defineComponent,\n  Fragment,\n  getCurrentInstance,\n  h,\n  nextTick,\n  onMounted,\n  onUpdated,\n  provide,\n  ref,\n  renderSlot,\n  watch,\n} from 'vue'\nimport { isPromise, NOOP } from '@vue/shared'\nimport { buildProps, definePropType } from '@element-plus/utils'\nimport {\n  EVENT_CODE,\n  INPUT_EVENT,\n  UPDATE_MODEL_EVENT,\n} from '@element-plus/constants'\nimport ElIcon from '@element-plus/components/icon'\nimport { Plus } from '@element-plus/icons-vue'\nimport { tabsRootContextKey } from '@element-plus/tokens'\nimport TabNav from './tab-nav'\nimport type { TabsPaneContext } from '@element-plus/tokens'\n\nimport type {\n  Component,\n  ComponentInternalInstance,\n  VNode,\n  ExtractPropTypes,\n  Ref,\n} from 'vue'\n\nexport const tabsProps = buildProps({\n  type: {\n    type: String,\n    values: ['card', 'border-card', ''],\n    default: '',\n  },\n  activeName: {\n    type: String,\n    default: '',\n  },\n  closable: Boolean,\n  addable: Boolean,\n  modelValue: {\n    type: [String, Number],\n    default: '',\n  },\n  editable: Boolean,\n  tabPosition: {\n    type: String,\n    values: ['top', 'right', 'bottom', 'left'],\n    default: 'top',\n  },\n  beforeLeave: {\n    type: definePropType<\n      (\n        newTabName: string | number,\n        oldTabName: string | number\n      ) => void | boolean | Promise<void | boolean>\n    >(Function),\n    default: () => true,\n  },\n  stretch: Boolean,\n} as const)\nexport type TabsProps = ExtractPropTypes<typeof tabsProps>\n\nexport const tabsEmits = {\n  [UPDATE_MODEL_EVENT]: (tabName: string | number) =>\n    typeof tabName === 'string' || typeof tabName === 'number',\n  [INPUT_EVENT]: (tabName: string | number) =>\n    typeof tabName === 'string' || typeof tabName === 'number',\n  'tab-click': (pane: TabsPaneContext, ev: Event) => ev instanceof Event,\n  edit: (paneName: string | number | null, action: 'remove' | 'add') =>\n    action === 'remove' || action === 'add',\n  'tab-remove': (paneName: string | number) =>\n    typeof paneName === 'string' || typeof paneName === 'number',\n  'tab-add': () => true,\n}\nexport type TabsEmits = typeof tabsEmits\n\nconst getPaneInstanceFromSlot = (\n  vnode: VNode,\n  paneInstanceList: ComponentInternalInstance[] = []\n) => {\n  const children = (vnode.children || []) as ArrayLike<VNode>\n  Array.from(children).forEach((node) => {\n    let type = node.type\n    type = (type as Component).name || type\n    if (type === 'ElTabPane' && node.component) {\n      paneInstanceList.push(node.component)\n    } else if (type === Fragment || type === 'template') {\n      getPaneInstanceFromSlot(node, paneInstanceList)\n    }\n  })\n  return paneInstanceList\n}\n\nexport default defineComponent({\n  name: 'ElTabs',\n\n  props: tabsProps,\n  emits: tabsEmits,\n\n  setup(props, { emit, slots, expose }) {\n    const instance = getCurrentInstance()!\n    const nav$ = ref<InstanceType<typeof TabNav>>()\n\n    const panes: Ref<TabsPaneContext[]> = ref([])\n    const currentName = ref(props.modelValue || props.activeName || '0')\n\n    const paneStatesMap: Record<number, TabsPaneContext> = {}\n\n    const updatePaneInstances = (isForceUpdate = false) => {\n      if (slots.default) {\n        const children = instance.subTree.children as ArrayLike<VNode>\n        const content = Array.from(children).find(\n          ({ props }) => props?.class === 'el-tabs__content'\n        )\n        if (!content) return\n\n        const paneInstanceList: TabsPaneContext[] = getPaneInstanceFromSlot(\n          content\n        ).map((paneComponent) => paneStatesMap[paneComponent.uid])\n\n        const panesChanged = !(\n          paneInstanceList.length === panes.value.length &&\n          paneInstanceList.every(\n            (pane, index) => pane.uid === panes.value[index].uid\n          )\n        )\n\n        if (isForceUpdate || panesChanged) {\n          panes.value = paneInstanceList\n        }\n      } else if (panes.value.length !== 0) {\n        panes.value = []\n      }\n    }\n\n    const changeCurrentName = (value: string | number) => {\n      currentName.value = value\n      emit(INPUT_EVENT, value)\n      emit(UPDATE_MODEL_EVENT, value)\n    }\n\n    const setCurrentName = (value: string | number) => {\n      // should do nothing.\n      if (currentName.value === value) return\n\n      const canLeave = props.beforeLeave?.(value, currentName.value)\n      if (isPromise(canLeave)) {\n        canLeave.then(\n          () => {\n            changeCurrentName(value)\n\n            // call exposed function, Vue doesn't support expose in typescript yet.\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            nav$.value?.removeFocus?.()\n          },\n          // ignore promise rejection in `before-leave` hook\n          NOOP\n        )\n      } else if (canLeave !== false) {\n        changeCurrentName(value)\n      }\n    }\n\n    const handleTabClick = (\n      tab: TabsPaneContext,\n      tabName: string | number,\n      event: Event\n    ) => {\n      if (tab.props.disabled) return\n      setCurrentName(tabName)\n      emit('tab-click', tab, event)\n    }\n\n    const handleTabRemove = (pane: TabsPaneContext, ev: Event) => {\n      if (pane.props.disabled) return\n      ev.stopPropagation()\n      emit('edit', pane.props.name, 'remove')\n      emit('tab-remove', pane.props.name)\n    }\n\n    const handleTabAdd = () => {\n      emit('edit', null, 'add')\n      emit('tab-add')\n    }\n\n    onUpdated(() => updatePaneInstances())\n    onMounted(() => updatePaneInstances())\n\n    watch(\n      () => props.activeName,\n      (modelValue) => setCurrentName(modelValue)\n    )\n\n    watch(\n      () => props.modelValue,\n      (modelValue) => setCurrentName(modelValue)\n    )\n\n    watch(currentName, async () => {\n      updatePaneInstances(true)\n      await nextTick()\n      await nav$.value?.$nextTick()\n\n      // call exposed function, Vue doesn't support expose in typescript yet.\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-expect-error\n      nav$.value?.scrollToActiveTab()\n    })\n\n    provide(tabsRootContextKey, {\n      props,\n      currentName,\n      updatePaneState: (pane) => (paneStatesMap[pane.uid] = pane),\n    })\n\n    expose({\n      currentName,\n    })\n\n    return () => {\n      const newButton =\n        props.editable || props.addable\n          ? h(\n              'span',\n              {\n                class: 'el-tabs__new-tab',\n                tabindex: '0',\n                onClick: handleTabAdd,\n                onKeydown: (ev: KeyboardEvent) => {\n                  if (ev.code === EVENT_CODE.enter) handleTabAdd()\n                },\n              },\n              [h(ElIcon, { class: 'is-icon-plus' }, { default: () => h(Plus) })]\n            )\n          : null\n\n      const header = h(\n        'div',\n        { class: ['el-tabs__header', `is-${props.tabPosition}`] },\n        [\n          newButton,\n          h(TabNav, {\n            currentName: currentName.value,\n            editable: props.editable,\n            type: props.type,\n            panes: panes.value,\n            stretch: props.stretch,\n            ref: nav$,\n            onTabClick: handleTabClick,\n            onTabRemove: handleTabRemove,\n          }),\n        ]\n      )\n\n      const panels = h('div', { class: 'el-tabs__content' }, [\n        renderSlot(slots, 'default'),\n      ])\n\n      return h(\n        'div',\n        {\n          class: {\n            'el-tabs': true,\n            'el-tabs--card': props.type === 'card',\n            [`el-tabs--${props.tabPosition}`]: true,\n            'el-tabs--border-card': props.type === 'border-card',\n          },\n        },\n        props.tabPosition !== 'bottom' ? [header, panels] : [panels, header]\n      )\n    }\n  },\n})\n"]},"metadata":{},"sourceType":"module"}