{"ast":null,"code":"import _asyncToGenerator from \"D:/yqwwant/.vscode/.vscode/TodoList\\u8BB0\\u4E8B\\u672C/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"D:/yqwwant/.vscode/.vscode/TodoList\\u8BB0\\u4E8B\\u672C/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty from \"D:/yqwwant/.vscode/.vscode/TodoList\\u8BB0\\u4E8B\\u672C/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { defineComponent, reactive, computed, toRefs, provide, watch, ref, onMounted, nextTick, onBeforeUnmount, resolveComponent, openBlock, createElementBlock, normalizeClass, createElementVNode, normalizeStyle, createVNode, createBlock, createCommentVNode, Fragment, renderList } from 'vue';\nimport { ElInputNumber } from '../../input-number/index.mjs';\nimport '../../../constants/index.mjs';\nimport '../../../utils/index.mjs';\nimport '../../../hooks/index.mjs';\nimport SliderButton from './button.mjs';\nimport _sfc_main$1 from './marker.mjs';\nimport { useMarks } from './useMarks.mjs';\nimport { useSlide } from './useSlide.mjs';\nimport { useStops } from './useStops.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { isValidComponentSize } from '../../../utils/vue/validator.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT, INPUT_EVENT } from '../../../constants/event.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useSize } from '../../../hooks/use-common-props/index.mjs';\nimport { throwError } from '../../../utils/error.mjs';\nimport { on, off } from '../../../utils/dom/event.mjs';\n\nvar _sfc_main = defineComponent({\n  name: \"ElSlider\",\n  components: {\n    ElInputNumber: ElInputNumber,\n    SliderButton: SliderButton,\n    SliderMarker: _sfc_main$1\n  },\n  props: {\n    modelValue: {\n      type: [Number, Array],\n      \"default\": 0\n    },\n    min: {\n      type: Number,\n      \"default\": 0\n    },\n    max: {\n      type: Number,\n      \"default\": 100\n    },\n    step: {\n      type: Number,\n      \"default\": 1\n    },\n    showInput: {\n      type: Boolean,\n      \"default\": false\n    },\n    showInputControls: {\n      type: Boolean,\n      \"default\": true\n    },\n    size: {\n      type: String,\n      validator: isValidComponentSize\n    },\n    inputSize: {\n      type: String,\n      validator: isValidComponentSize\n    },\n    showStops: {\n      type: Boolean,\n      \"default\": false\n    },\n    showTooltip: {\n      type: Boolean,\n      \"default\": true\n    },\n    formatTooltip: {\n      type: Function,\n      \"default\": void 0\n    },\n    disabled: {\n      type: Boolean,\n      \"default\": false\n    },\n    range: {\n      type: Boolean,\n      \"default\": false\n    },\n    vertical: {\n      type: Boolean,\n      \"default\": false\n    },\n    height: {\n      type: String,\n      \"default\": \"\"\n    },\n    debounce: {\n      type: Number,\n      \"default\": 300\n    },\n    label: {\n      type: String,\n      \"default\": void 0\n    },\n    tooltipClass: {\n      type: String,\n      \"default\": void 0\n    },\n    marks: Object\n  },\n  emits: [UPDATE_MODEL_EVENT, CHANGE_EVENT, INPUT_EVENT],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var ns = useNamespace(\"slider\");\n    var initData = reactive({\n      firstValue: 0,\n      secondValue: 0,\n      oldValue: 0,\n      dragging: false,\n      sliderSize: 1\n    });\n\n    var _useSlide = useSlide(props, initData, emit),\n        elFormItem = _useSlide.elFormItem,\n        slider = _useSlide.slider,\n        firstButton = _useSlide.firstButton,\n        secondButton = _useSlide.secondButton,\n        sliderDisabled = _useSlide.sliderDisabled,\n        minValue = _useSlide.minValue,\n        maxValue = _useSlide.maxValue,\n        runwayStyle = _useSlide.runwayStyle,\n        barStyle = _useSlide.barStyle,\n        resetSize = _useSlide.resetSize,\n        emitChange = _useSlide.emitChange,\n        onSliderClick = _useSlide.onSliderClick,\n        setFirstValue = _useSlide.setFirstValue,\n        setSecondValue = _useSlide.setSecondValue;\n\n    var _useStops = useStops(props, initData, minValue, maxValue),\n        stops = _useStops.stops,\n        getStopStyle = _useStops.getStopStyle;\n\n    var sliderWrapperSize = useSize();\n    var sliderInputSize = computed(function () {\n      return props.inputSize || sliderWrapperSize.value;\n    });\n    var sliderKls = computed(function () {\n      return [ns.b(), ns.m(sliderWrapperSize.value), ns.is(\"vertical\", props.vertical), _defineProperty({}, ns.m(\"with-input\"), props.showInput)];\n    });\n    var markList = useMarks(props);\n    useWatch(props, initData, minValue, maxValue, emit, elFormItem);\n    var precision = computed(function () {\n      var precisions = [props.min, props.max, props.step].map(function (item) {\n        var decimal = \"\".concat(item).split(\".\")[1];\n        return decimal ? decimal.length : 0;\n      });\n      return Math.max.apply(null, precisions);\n    });\n\n    var _useLifecycle = useLifecycle(props, initData, resetSize),\n        sliderWrapper = _useLifecycle.sliderWrapper;\n\n    var _toRefs = toRefs(initData),\n        firstValue = _toRefs.firstValue,\n        secondValue = _toRefs.secondValue,\n        oldValue = _toRefs.oldValue,\n        dragging = _toRefs.dragging,\n        sliderSize = _toRefs.sliderSize;\n\n    var updateDragging = function updateDragging(val) {\n      initData.dragging = val;\n    };\n\n    provide(\"SliderProvider\", _objectSpread(_objectSpread({}, toRefs(props)), {}, {\n      sliderSize: sliderSize,\n      disabled: sliderDisabled,\n      precision: precision,\n      emitChange: emitChange,\n      resetSize: resetSize,\n      updateDragging: updateDragging\n    }));\n    return {\n      ns: ns,\n      firstValue: firstValue,\n      secondValue: secondValue,\n      oldValue: oldValue,\n      dragging: dragging,\n      sliderSize: sliderSize,\n      slider: slider,\n      firstButton: firstButton,\n      secondButton: secondButton,\n      sliderDisabled: sliderDisabled,\n      runwayStyle: runwayStyle,\n      barStyle: barStyle,\n      emitChange: emitChange,\n      onSliderClick: onSliderClick,\n      getStopStyle: getStopStyle,\n      setFirstValue: setFirstValue,\n      setSecondValue: setSecondValue,\n      stops: stops,\n      markList: markList,\n      sliderWrapper: sliderWrapper,\n      sliderWrapperSize: sliderWrapperSize,\n      sliderInputSize: sliderInputSize,\n      sliderKls: sliderKls\n    };\n  }\n});\n\nvar useWatch = function useWatch(props, initData, minValue, maxValue, emit, elFormItem) {\n  var _emit = function _emit(val) {\n    emit(UPDATE_MODEL_EVENT, val);\n    emit(INPUT_EVENT, val);\n  };\n\n  var valueChanged = function valueChanged() {\n    if (props.range) {\n      return ![minValue.value, maxValue.value].every(function (item, index) {\n        return item === initData.oldValue[index];\n      });\n    } else {\n      return props.modelValue !== initData.oldValue;\n    }\n  };\n\n  var setValues = function setValues() {\n    var _a, _b;\n\n    if (props.min > props.max) {\n      throwError(\"Slider\", \"min should not be greater than max.\");\n      return;\n    }\n\n    var val = props.modelValue;\n\n    if (props.range && Array.isArray(val)) {\n      if (val[1] < props.min) {\n        _emit([props.min, props.min]);\n      } else if (val[0] > props.max) {\n        _emit([props.max, props.max]);\n      } else if (val[0] < props.min) {\n        _emit([props.min, val[1]]);\n      } else if (val[1] > props.max) {\n        _emit([val[0], props.max]);\n      } else {\n        initData.firstValue = val[0];\n        initData.secondValue = val[1];\n\n        if (valueChanged()) {\n          (_a = elFormItem.validate) == null ? void 0 : _a.call(elFormItem, \"change\");\n          initData.oldValue = val.slice();\n        }\n      }\n    } else if (!props.range && typeof val === \"number\" && !isNaN(val)) {\n      if (val < props.min) {\n        _emit(props.min);\n      } else if (val > props.max) {\n        _emit(props.max);\n      } else {\n        initData.firstValue = val;\n\n        if (valueChanged()) {\n          (_b = elFormItem.validate) == null ? void 0 : _b.call(elFormItem, \"change\");\n          initData.oldValue = val;\n        }\n      }\n    }\n  };\n\n  setValues();\n  watch(function () {\n    return initData.dragging;\n  }, function (val) {\n    if (!val) {\n      setValues();\n    }\n  });\n  watch(function () {\n    return props.modelValue;\n  }, function (val, oldVal) {\n    if (initData.dragging || Array.isArray(val) && Array.isArray(oldVal) && val.every(function (item, index) {\n      return item === oldVal[index];\n    }) && initData.firstValue === val[0] && initData.secondValue === val[1]) {\n      return;\n    }\n\n    setValues();\n  }, {\n    deep: true\n  });\n  watch(function () {\n    return [props.min, props.max];\n  }, function () {\n    setValues();\n  });\n};\n\nvar useLifecycle = function useLifecycle(props, initData, resetSize) {\n  var sliderWrapper = ref(null);\n  onMounted( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var valuetext;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (props.range) {\n              if (Array.isArray(props.modelValue)) {\n                initData.firstValue = Math.max(props.min, props.modelValue[0]);\n                initData.secondValue = Math.min(props.max, props.modelValue[1]);\n              } else {\n                initData.firstValue = props.min;\n                initData.secondValue = props.max;\n              }\n\n              initData.oldValue = [initData.firstValue, initData.secondValue];\n              valuetext = \"\".concat(initData.firstValue, \"-\").concat(initData.secondValue);\n            } else {\n              if (typeof props.modelValue !== \"number\" || isNaN(props.modelValue)) {\n                initData.firstValue = props.min;\n              } else {\n                initData.firstValue = Math.min(props.max, Math.max(props.min, props.modelValue));\n              }\n\n              initData.oldValue = initData.firstValue;\n              valuetext = initData.firstValue;\n            }\n\n            sliderWrapper.value.setAttribute(\"aria-valuetext\", valuetext);\n            sliderWrapper.value.setAttribute(\"aria-label\", props.label ? props.label : \"slider between \".concat(props.min, \" and \").concat(props.max));\n            on(window, \"resize\", resetSize);\n            _context.next = 6;\n            return nextTick();\n\n          case 6:\n            resetSize();\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })));\n  onBeforeUnmount(function () {\n    off(window, \"resize\", resetSize);\n  });\n  return {\n    sliderWrapper: sliderWrapper\n  };\n};\n\nvar _hoisted_1 = [\"aria-valuemin\", \"aria-valuemax\", \"aria-orientation\", \"aria-disabled\"];\nvar _hoisted_2 = {\n  key: 1\n};\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_slider_button = resolveComponent(\"slider-button\");\n\n  var _component_slider_marker = resolveComponent(\"slider-marker\");\n\n  var _component_el_input_number = resolveComponent(\"el-input-number\");\n\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"sliderWrapper\",\n    \"class\": normalizeClass(_ctx.sliderKls),\n    role: \"slider\",\n    \"aria-valuemin\": _ctx.min,\n    \"aria-valuemax\": _ctx.max,\n    \"aria-orientation\": _ctx.vertical ? \"vertical\" : \"horizontal\",\n    \"aria-disabled\": _ctx.sliderDisabled\n  }, [createElementVNode(\"div\", {\n    ref: \"slider\",\n    \"class\": normalizeClass([_ctx.ns.e(\"runway\"), {\n      \"show-input\": _ctx.showInput && !_ctx.range,\n      disabled: _ctx.sliderDisabled\n    }]),\n    style: normalizeStyle(_ctx.runwayStyle),\n    onClick: _cache[0] || (_cache[0] = function () {\n      return _ctx.onSliderClick && _ctx.onSliderClick.apply(_ctx, arguments);\n    })\n  }, [createElementVNode(\"div\", {\n    \"class\": normalizeClass(_ctx.ns.e(\"bar\")),\n    style: normalizeStyle(_ctx.barStyle)\n  }, null, 6), createVNode(_component_slider_button, {\n    ref: \"firstButton\",\n    \"model-value\": _ctx.firstValue,\n    vertical: _ctx.vertical,\n    \"tooltip-class\": _ctx.tooltipClass,\n    \"onUpdate:modelValue\": _ctx.setFirstValue\n  }, null, 8, [\"model-value\", \"vertical\", \"tooltip-class\", \"onUpdate:modelValue\"]), _ctx.range ? (openBlock(), createBlock(_component_slider_button, {\n    key: 0,\n    ref: \"secondButton\",\n    \"model-value\": _ctx.secondValue,\n    vertical: _ctx.vertical,\n    \"tooltip-class\": _ctx.tooltipClass,\n    \"onUpdate:modelValue\": _ctx.setSecondValue\n  }, null, 8, [\"model-value\", \"vertical\", \"tooltip-class\", \"onUpdate:modelValue\"])) : createCommentVNode(\"v-if\", true), _ctx.showStops ? (openBlock(), createElementBlock(\"div\", _hoisted_2, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.stops, function (item, key) {\n    return openBlock(), createElementBlock(\"div\", {\n      key: key,\n      \"class\": normalizeClass(_ctx.ns.e(\"stop\")),\n      style: normalizeStyle(_ctx.getStopStyle(item))\n    }, null, 6);\n  }), 128))])) : createCommentVNode(\"v-if\", true), _ctx.markList.length > 0 ? (openBlock(), createElementBlock(Fragment, {\n    key: 2\n  }, [createElementVNode(\"div\", null, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.markList, function (item, key) {\n    return openBlock(), createElementBlock(\"div\", {\n      key: key,\n      style: normalizeStyle(_ctx.getStopStyle(item.position)),\n      \"class\": normalizeClass([_ctx.ns.e(\"stop\"), _ctx.ns.e(\"marks-stop\")])\n    }, null, 6);\n  }), 128))]), createElementVNode(\"div\", {\n    \"class\": normalizeClass(_ctx.ns.e(\"marks\"))\n  }, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.markList, function (item, key) {\n    return openBlock(), createBlock(_component_slider_marker, {\n      key: key,\n      mark: item.mark,\n      style: normalizeStyle(_ctx.getStopStyle(item.position))\n    }, null, 8, [\"mark\", \"style\"]);\n  }), 128))], 2)], 64)) : createCommentVNode(\"v-if\", true)], 6), _ctx.showInput && !_ctx.range ? (openBlock(), createBlock(_component_el_input_number, {\n    key: 0,\n    ref: \"input\",\n    \"model-value\": _ctx.firstValue,\n    \"class\": normalizeClass(_ctx.ns.e(\"input\")),\n    step: _ctx.step,\n    disabled: _ctx.sliderDisabled,\n    controls: _ctx.showInputControls,\n    min: _ctx.min,\n    max: _ctx.max,\n    debounce: _ctx.debounce,\n    size: _ctx.sliderInputSize,\n    \"onUpdate:modelValue\": _ctx.setFirstValue,\n    onChange: _ctx.emitChange\n  }, null, 8, [\"model-value\", \"class\", \"step\", \"disabled\", \"controls\", \"min\", \"max\", \"debounce\", \"size\", \"onUpdate:modelValue\", \"onChange\"])) : createCommentVNode(\"v-if\", true)], 10, _hoisted_1);\n}\n\nvar Slider = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { Slider as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA,IAAKA,YAAaC,gBAAa;AAC7BC,QAAM,UADuB;AAG7BC,cAAY;AACVC,gCADU;AAEVC,8BAFU;AAEVC,kBACAA;AAHU,GAHiB;AAS7BC,SAAO;AACLC,gBAAY;AACVC,YAAM,CAACC,MAAD,EAASC,KAAT,CADI;AAEV,iBAAS;AAFC,KADP;AAKLC,SAAK;AACHH,YAAMC,MADH;AAEH,iBAAS;AAFN,KALA;AASLG,SAAK;AACHJ,YAAMC,MADH;AAEH,iBAAS;AAFN,KATA;AAaLI,UAAM;AACJL,YAAMC,MADF;AAEJ,iBAAS;AAFL,KAbD;AAiBLK,eAAW;AACTN,YAAMO,OADG;AAET,iBAAS;AAFA,KAjBN;AAqBLC,uBAAmB;AACjBR,YAAMO,OADW;AAEjB,iBAAS;AAFQ,KArBd;AAyBLE,UAAM;AACJT,YAAMU,MADF;AAEJC,iBAAWC;AAFP,KAzBD;AA6BLC,eAAW;AACTb,YAAMU,MADG;AAETC,iBAAWC;AAFF,KA7BN;AAiCLE,eAAW;AACTd,YAAMO,OADG;AAET,iBAAS;AAFA,KAjCN;AAqCLQ,iBAAa;AACXf,YAAMO,OADK;AAEX,iBAAS;AAFE,KArCR;AAyCLS,mBAAe;AACbhB,YAAMiB,QADO;AAEb,iBAAS;AAFI,KAzCV;AA6CLC,cAAU;AACRlB,YAAMO,OADE;AAER,iBAAS;AAFD,KA7CL;AAiDLY,WAAO;AACLnB,YAAMO,OADD;AAEL,iBAAS;AAFJ,KAjDF;AAqDLa,cAAU;AACRpB,YAAMO,OADE;AAER,iBAAS;AAFD,KArDL;AAyDLc,YAAQ;AACNrB,YAAMU,MADA;AAEN,iBAAS;AAFH,KAzDH;AA6DLY,cAAU;AACRtB,YAAMC,MADE;AAER,iBAAS;AAFD,KA7DL;AAiELsB,WAAO;AACLvB,YAAMU,MADD;AAEL,iBAAS;AAFJ,KAjEF;AAqELc,kBAAc;AACZxB,YAAMU,MADM;AAEZ,iBAAS;AAFG,KArET;AAyELe,WAAOC;AAzEF,GATsB;AAqF7BC,SAAO,CAACC,kBAAD,EAAqBC,YAArB,EAAmCC,WAAnC,CArFsB;AAuF7BC,OAvF6B,iBAuFvBjC,KAvFuB,QAuFN;AAAA,QAARkC,IAAQ,QAARA,IAAQ;AACrB,QAAMC,KAAKC,aAAa,QAAb,CAAX;AACA,QAAMC,WAAWC,SAAS;AACxBC,kBAAY,CADY;AAExBC,mBAAa,CAFW;AAGxBC,gBAAU,CAHc;AAIxBC,gBAAU,KAJc;AAKxBC,kBAAY;AALY,KAAT,CAAjB;;AAQA,oBAeIC,SAAS5C,KAAT,EAAgBqC,QAAhB,EAA0BH,IAA1B,CAfJ;AAAA,QACEW,UADF,aACEA,UADF;AAAA,QAEEC,MAFF,aAEEA,MAFF;AAAA,QAGEC,WAHF,aAGEA,WAHF;AAAA,QAIEC,YAJF,aAIEA,YAJF;AAAA,QAKEC,cALF,aAKEA,cALF;AAAA,QAMEC,QANF,aAMEA,QANF;AAAA,QAOEC,QAPF,aAOEA,QAPF;AAAA,QAQEC,WARF,aAQEA,WARF;AAAA,QASEC,QATF,aASEA,QATF;AAAA,QAUEC,SAVF,aAUEA,SAVF;AAAA,QAWEC,UAXF,aAWEA,UAXF;AAAA,QAYEC,aAZF,aAYEA,aAZF;AAAA,QAaEC,aAbF,aAaEA,aAbF;AAAA,QAcEC,cAdF,aAcEA,cAdF;;AAiBA,oBAAgCC,SAC9B3D,KAD8B,EAE9BqC,QAF8B,EAG9Ba,QAH8B,EAI9BC,QAJ8B,CAAhC;AAAA,QAAQS,KAAR,aAAQA,KAAR;AAAA,QAAeC,YAAf,aAAeA,YAAf;;AAOA,QAAMC,oBAAoBC,SAA1B;AACA,QAAMC,kBAAkBC,SACtB;AAAA,aAAMjE,MAAMe,SAAN,IAAmB+C,kBAAkBI,KAA3C;AAAA,KADsB,CAAxB;AAIA,QAAMC,YAAYF,SAAS;AAAA,aAAM,CAC/B9B,GAAGiC,CAAH,EAD+B,EAE/BjC,GAAGkC,CAAH,CAAKP,kBAAkBI,KAAvB,CAF+B,EAG/B/B,GAAGmC,EAAH,CAAM,UAAN,EAAkBtE,MAAMsB,QAAxB,CAH+B,sBAI5Ba,GAAGkC,CAAH,CAAK,YAAL,CAJ4B,EAIPrE,MAAMQ,SAJC,EAAN;AAAA,KAAT,CAAlB;AAOA,QAAM+D,WAAWC,SAASxE,KAAT,CAAjB;AAEAyE,aAASzE,KAAT,EAAgBqC,QAAhB,EAA0Ba,QAA1B,EAAoCC,QAApC,EAA8CjB,IAA9C,EAAoDW,UAApD;AAEA,QAAM6B,YAAYT,SAAS,YAAM;AAC/B,UAAMU,aAAa,CAAC3E,MAAMK,GAAP,EAAYL,MAAMM,GAAlB,EAAuBN,MAAMO,IAA7B,EAAmCqE,GAAnC,CAAuC,UAACC,IAAD,EAAU;AAClE,YAAMC,UAAU,UAAGD,IAAH,EAAUE,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAhB;AACA,eAAOD,UAAUA,QAAQE,MAAlB,GAA2B,CAAlC;AAAkC,OAFjB,CAAnB;AAIA,aAAOC,KAAK3E,GAAL,CAAS4E,KAAT,CAAe,IAAf,EAAqBP,UAArB,CAAP;AAA4B,KALZ,CAAlB;;AAQA,wBAA0BQ,aAAanF,KAAb,EAAoBqC,QAApB,EAA8BiB,SAA9B,CAA1B;AAAA,QAAQ8B,aAAR,iBAAQA,aAAR;;AAEA,kBACEC,OAAOhD,QAAP,CADF;AAAA,QAAQE,UAAR,WAAQA,UAAR;AAAA,QAAoBC,WAApB,WAAoBA,WAApB;AAAA,QAAiCC,QAAjC,WAAiCA,QAAjC;AAAA,QAA2CC,QAA3C,WAA2CA,QAA3C;AAAA,QAAqDC,UAArD,WAAqDA,UAArD;;AAGA,QAAM2C,iBAAiB,SAAjBA,cAAiB,CAACC,GAAD,EAAkB;AACvClD,eAASK,QAAT,GAAoB6C,GAApB;AAAoB,KADtB;;AAIAC,YAAQ,gBAAR,kCACKH,OAAOrF,KAAP,CADL;AAEE2C,4BAFF;AAGEvB,gBAAU6B,cAHZ;AAIEyB,0BAJF;AAKEnB,4BALF;AAMED,0BANF;AAOEgC;AAPF;AAUA,WAAO;AACLnD,YADK;AAELI,4BAFK;AAGLC,8BAHK;AAILC,wBAJK;AAKLC,wBALK;AAMLC,4BANK;AAQLG,oBARK;AASLC,8BATK;AAULC,gCAVK;AAWLC,oCAXK;AAYLG,8BAZK;AAaLC,wBAbK;AAcLE,4BAdK;AAeLC,kCAfK;AAgBLK,gCAhBK;AAiBLJ,kCAjBK;AAkBLC,oCAlBK;AAoBLE,kBApBK;AAqBLW,wBArBK;AAuBLa,kCAvBK;AAwBLtB,0CAxBK;AAyBLE,sCAzBK;AA0BLG;AA1BK,KAAP;AA0BE;AA9LyB,CAAb,CAAlB;;AAmMA,IAAMM,WAAW,SAAXA,QAAW,CAACzE,KAAD,EAAQqC,QAAR,EAAkBa,QAAlB,EAA4BC,QAA5B,EAAsCjB,IAAtC,EAA4CW,UAA5C,EAA2D;AAC1E,MAAM4C,QAAQ,SAARA,KAAQ,CAACF,GAAD,EAA4B;AACxCrD,SAAKJ,kBAAL,EAAyByD,GAAzB;AACArD,SAAKF,WAAL,EAAkBuD,GAAlB;AAAkB,GAFpB;;AAKA,MAAMG,eAAe,SAAfA,YAAe,GAAM;AACzB,QAAI1F,MAAMqB,KAAV,EAAiB;AACf,aAAO,CAAC,CAAC6B,SAASgB,KAAV,EAAiBf,SAASe,KAA1B,EAAiCyB,KAAjC,CACN,UAACd,IAAD,EAAOe,KAAP;AAAA,eAAiBf,SAASxC,SAASI,QAAT,CAAkBmD,KAAlB,CAA1B;AAAA,OADM,CAAR;AAC8C,KAFhD,MAIO;AACL,aAAO5F,MAAMC,UAAN,KAAqBoC,SAASI,QAArC;AAAqC;AAAA,GANzC;;AAUA,MAAMoD,YAAY,SAAZA,SAAY,GAAM;AACtB,QAAIC,EAAJ,EAAIC,EAAJ;;AACE,oBAAW/F,SAAX,EAAW;AACXgG;AAAA;AAEF;;AACA;;AACE,cAAQ3E,KAAR,IAAajB,kBAAb,EAAa;AACX,cAAM,CAAN,IAAOJ,SAAP,EAAO;AAAiByF,qBACXpF,GADW,EACNL,MAAMK,GADA;AAExB,OAFA,MAEA,QAAa,CAAb,IAAkBL,MAAMM,GAAxB,EAAwB;AAAAmF,qBACXnF,GADW,EACNN,MAAMM,GADA;AAExB,OAFA,MAEA,QAAa,CAAb,IAAkBN,SAAlB,EAAkB;AAAIyF,qBACTpF,GADS,EACJkF,MADI;AAEtB,OAFA,MAEA,aAAevF,SAAf,EAAe;AAAMyF,aAChB,qBADgB;AAErB,OAFA,MAEA;AACApD,iBAASE,UAAT,GAASgD,MAAT;AACAlD,+BAAoBkD,MAApB;;AACE;AACA;AAAwBlD;AAAA;AAAA;AAI5B,KAjBA,MAiBA,KAAUrC,MAAMqB,KAAhB,IAAqB,uBAArB,IAAqB,WAArB,EAAqB;AACnB;AAAYoE;AAEZ,OAFA,MAEA,OAAY,YAAZ,EAAY;AAAAA,aACP,WADO;AAEZ,OAFA,MAEA;AACApD;;AACE;AACA;AAAoBA;AAAA;AAAA;AAAA;AAM5B,GAtCA;;AAwCAwD;AAGII,QAAI;AAAA,WAAM5D,iBAAN;AAAA,GAAJ,EAAU;AACR;AAAAwD;AAAA;AAKN,GANI;AASAI,QACE;AAAA;AAAA,GADF,EACE;AAOA;AAAA;AAAA;AAAA;AAEF;;AAAAJ;AAEF,GAZE,EAYF;AACQK;AADR,GAZE;AAoBAD;AAAA;AAAA;AAAAJ;AAAA;AAKN,CA7FA;;AA8FE;AAEA,sBAAsBM,SAAtB;AACEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAEE;AACE,sCAAsBnG,UAAtB,GAAsB;AACtBoC,yBAASE,UAAT,GAAS0C,wCAAT;AAA4D5C;AAE5D,eAHA,MAGA;AACAA,yBAASE,UAAT,GAASvC,SAAT;AAA6BqC;AAE/B;;AACAA;AAA+CgE;AAE/C,aAVA,MAUA;AACE,yBAASrG,gBAAT,KAAS,QAAT,IAASsG,uBAAT,EAAS;AAAmBjE;AAE5B,eAFA,MAEA;AAE4BA;AAG9B;;AACAA;AAAqBgE;AAGvB;;AAGAjB,0BAAclB,KAAd,CAAoBqC,YAApB,CACE,gBADF,EACEF,SADF;AAKAjB;AAEAoB;AAlCA;AAAA,mBAmCAC,UAnCA;;AAAA;AAmCAnD;;AAnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuCAoD;AAAsBC;AAGxB,GAHE;AAGK;AACLvB;AADK;CA7CP;;;;;;;;;;;;;;AAnUM,SA3EAwB;AACHT,wBADGS;AAEJ,2CAFIA;AAGHC,kBAHGD;AAIH,qBAAeE,QAJZF;AAKH,6BALGA;AAMH,iEANGA;AAMY;AANZA,MA2DEG;AAjDHZ,iBAiDG;AAjDE,6BAAgBW,mBAAhB,EAAmF;AAAA;AAAA1F;AAAA,KAAnF,EAiDF;AA5CH4F,2CA4CG;AA5CIC;AAAA;AAAA;AA4CJ,MA1C8CF,0BAArC;AAAc,aAAKG,eAAEJ,gBAAFI,CAAnB;AAAqBF;AAArB,GAAqC,YAOhDG;AAJChB,sBAID;AAHC,kCAGD;AAFC7E,2BAED;AADC,sCACD;AADqB;AACrB,8BACF,mDADE,GAQAwF;AALAM,SAAI,CAKJ;AAJCjB,uBAID;AAHC,mCAGD;AAFC7E,2BAED;AADC,sCACD;AADqB;AACrB,wHAQIwF;AADG;AAFJM,cAEI;AADJ,eAAKF,eAAEJ,iBAAFI,CACD;AADgBF;AAChB;UACH,yCAkBKF;AAAAM;AAAA,MATHL;AADG;AAFJK,cAEI;AADJJ,aAAKK,gDACD;AADsB;AACtB;UACH,GASG,EADHN,0BAPO;AAAI;AAAJ,GAOP;AADF;AAFCK,cAED;AADCE,qBACD;AAD0BN;AAC1B;YACE,IACG,2CACP,MAeJF;AAZAM,SAAI,CAYJ;AAXCjB,gBAWD;AAVC,kCAUD;AATC,+CASD;AARC5F,cAAU,KAQX;AAPCa,cAAU0F,mBAOX;AANCS,oCAMD;AALClH,SAAKyG,QAKN;AAJCxG,cAAUA,GAIX;AAHCkB,2BAGD;AAFCb,8BAED;AADC,6CACD;AADS6G;AACT,iLA1EEZ,iBA2EA","names":["_sfc_main","defineComponent","name","components","ElInputNumber","SliderButton","SliderMarker","props","modelValue","type","Number","Array","min","max","step","showInput","Boolean","showInputControls","size","String","validator","isValidComponentSize","inputSize","showStops","showTooltip","formatTooltip","Function","disabled","range","vertical","height","debounce","label","tooltipClass","marks","Object","emits","UPDATE_MODEL_EVENT","CHANGE_EVENT","INPUT_EVENT","setup","emit","ns","useNamespace","initData","reactive","firstValue","secondValue","oldValue","dragging","sliderSize","useSlide","elFormItem","slider","firstButton","secondButton","sliderDisabled","minValue","maxValue","runwayStyle","barStyle","resetSize","emitChange","onSliderClick","setFirstValue","setSecondValue","useStops","stops","getStopStyle","sliderWrapperSize","useSize","sliderInputSize","computed","value","sliderKls","b","m","is","markList","useMarks","useWatch","precision","precisions","map","item","decimal","split","length","Math","apply","useLifecycle","sliderWrapper","toRefs","updateDragging","val","provide","_emit","valueChanged","every","index","setValues","_a","_b","throwError","watch","deep","ref","onMounted","valuetext","isNaN","setAttribute","on","nextTick","onBeforeUnmount","off","_openBlock","role","_ctx","createElementVNode","style","onClick","_normalizeClass","createVNode","key","_normalizeStyle","mark","controls","onChange"],"sources":["../../../../../../packages/components/slider/src/index.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"sliderWrapper\"\n    :class=\"sliderKls\"\n    role=\"slider\"\n    :aria-valuemin=\"min\"\n    :aria-valuemax=\"max\"\n    :aria-orientation=\"vertical ? 'vertical' : 'horizontal'\"\n    :aria-disabled=\"sliderDisabled\"\n  >\n    <div\n      ref=\"slider\"\n      :class=\"[\n        ns.e('runway'),\n        { 'show-input': showInput && !range, disabled: sliderDisabled },\n      ]\"\n      :style=\"runwayStyle\"\n      @click=\"onSliderClick\"\n    >\n      <div :class=\"ns.e('bar')\" :style=\"barStyle\"></div>\n      <slider-button\n        ref=\"firstButton\"\n        :model-value=\"firstValue\"\n        :vertical=\"vertical\"\n        :tooltip-class=\"tooltipClass\"\n        @update:model-value=\"setFirstValue\"\n      />\n      <slider-button\n        v-if=\"range\"\n        ref=\"secondButton\"\n        :model-value=\"secondValue\"\n        :vertical=\"vertical\"\n        :tooltip-class=\"tooltipClass\"\n        @update:model-value=\"setSecondValue\"\n      />\n      <div v-if=\"showStops\">\n        <div\n          v-for=\"(item, key) in stops\"\n          :key=\"key\"\n          :class=\"ns.e('stop')\"\n          :style=\"getStopStyle(item)\"\n        ></div>\n      </div>\n      <template v-if=\"markList.length > 0\">\n        <div>\n          <div\n            v-for=\"(item, key) in markList\"\n            :key=\"key\"\n            :style=\"getStopStyle(item.position)\"\n            :class=\"[ns.e('stop'), ns.e('marks-stop')]\"\n          ></div>\n        </div>\n        <div :class=\"ns.e('marks')\">\n          <slider-marker\n            v-for=\"(item, key) in markList\"\n            :key=\"key\"\n            :mark=\"item.mark\"\n            :style=\"getStopStyle(item.position)\"\n          />\n        </div>\n      </template>\n    </div>\n    <el-input-number\n      v-if=\"showInput && !range\"\n      ref=\"input\"\n      :model-value=\"firstValue\"\n      :class=\"ns.e('input')\"\n      :step=\"step\"\n      :disabled=\"sliderDisabled\"\n      :controls=\"showInputControls\"\n      :min=\"min\"\n      :max=\"max\"\n      :debounce=\"debounce\"\n      :size=\"sliderInputSize\"\n      @update:model-value=\"setFirstValue\"\n      @change=\"emitChange\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRefs,\n  watch,\n} from 'vue'\nimport ElInputNumber from '@element-plus/components/input-number'\nimport {\n  UPDATE_MODEL_EVENT,\n  CHANGE_EVENT,\n  INPUT_EVENT,\n} from '@element-plus/constants'\nimport { off, on, throwError, isValidComponentSize } from '@element-plus/utils'\nimport { useNamespace, useSize } from '@element-plus/hooks'\nimport SliderButton from './button.vue'\nimport SliderMarker from './marker.vue'\nimport { useMarks } from './useMarks'\nimport { useSlide } from './useSlide'\nimport { useStops } from './useStops'\n\nimport type { PropType, Ref } from 'vue'\nimport type { ComponentSize } from '@element-plus/constants'\nimport type { Nullable } from '@element-plus/utils'\n\nexport default defineComponent({\n  name: 'ElSlider',\n\n  components: {\n    ElInputNumber,\n    SliderButton,\n    SliderMarker,\n  },\n\n  props: {\n    modelValue: {\n      type: [Number, Array] as PropType<number | number[]>,\n      default: 0,\n    },\n    min: {\n      type: Number,\n      default: 0,\n    },\n    max: {\n      type: Number,\n      default: 100,\n    },\n    step: {\n      type: Number,\n      default: 1,\n    },\n    showInput: {\n      type: Boolean,\n      default: false,\n    },\n    showInputControls: {\n      type: Boolean,\n      default: true,\n    },\n    size: {\n      type: String as PropType<ComponentSize>,\n      validator: isValidComponentSize,\n    },\n    inputSize: {\n      type: String as PropType<ComponentSize>,\n      validator: isValidComponentSize,\n    },\n    showStops: {\n      type: Boolean,\n      default: false,\n    },\n    showTooltip: {\n      type: Boolean,\n      default: true,\n    },\n    formatTooltip: {\n      type: Function as PropType<(val: number) => number | string>,\n      default: undefined,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    range: {\n      type: Boolean,\n      default: false,\n    },\n    vertical: {\n      type: Boolean,\n      default: false,\n    },\n    height: {\n      type: String,\n      default: '',\n    },\n    debounce: {\n      type: Number,\n      default: 300,\n    },\n    label: {\n      type: String,\n      default: undefined,\n    },\n    tooltipClass: {\n      type: String,\n      default: undefined,\n    },\n    marks: Object,\n  },\n\n  emits: [UPDATE_MODEL_EVENT, CHANGE_EVENT, INPUT_EVENT],\n\n  setup(props, { emit }) {\n    const ns = useNamespace('slider')\n    const initData = reactive({\n      firstValue: 0,\n      secondValue: 0,\n      oldValue: 0,\n      dragging: false,\n      sliderSize: 1,\n    })\n\n    const {\n      elFormItem,\n      slider,\n      firstButton,\n      secondButton,\n      sliderDisabled,\n      minValue,\n      maxValue,\n      runwayStyle,\n      barStyle,\n      resetSize,\n      emitChange,\n      onSliderClick,\n      setFirstValue,\n      setSecondValue,\n    } = useSlide(props, initData, emit)\n\n    const { stops, getStopStyle } = useStops(\n      props,\n      initData,\n      minValue,\n      maxValue\n    )\n\n    const sliderWrapperSize = useSize()\n    const sliderInputSize = computed(\n      () => props.inputSize || sliderWrapperSize.value\n    )\n\n    const sliderKls = computed(() => [\n      ns.b(),\n      ns.m(sliderWrapperSize.value),\n      ns.is('vertical', props.vertical),\n      { [ns.m('with-input')]: props.showInput },\n    ])\n\n    const markList = useMarks(props)\n\n    useWatch(props, initData, minValue, maxValue, emit, elFormItem)\n\n    const precision = computed(() => {\n      const precisions = [props.min, props.max, props.step].map((item) => {\n        const decimal = `${item}`.split('.')[1]\n        return decimal ? decimal.length : 0\n      })\n      return Math.max.apply(null, precisions)\n    })\n\n    const { sliderWrapper } = useLifecycle(props, initData, resetSize)\n\n    const { firstValue, secondValue, oldValue, dragging, sliderSize } =\n      toRefs(initData)\n\n    const updateDragging = (val: boolean) => {\n      initData.dragging = val\n    }\n\n    provide('SliderProvider', {\n      ...toRefs(props),\n      sliderSize,\n      disabled: sliderDisabled,\n      precision,\n      emitChange,\n      resetSize,\n      updateDragging,\n    })\n\n    return {\n      ns,\n      firstValue,\n      secondValue,\n      oldValue,\n      dragging,\n      sliderSize,\n\n      slider,\n      firstButton,\n      secondButton,\n      sliderDisabled,\n      runwayStyle,\n      barStyle,\n      emitChange,\n      onSliderClick,\n      getStopStyle,\n      setFirstValue,\n      setSecondValue,\n\n      stops,\n      markList,\n\n      sliderWrapper,\n      sliderWrapperSize,\n      sliderInputSize,\n      sliderKls,\n    }\n  },\n})\n\nconst useWatch = (props, initData, minValue, maxValue, emit, elFormItem) => {\n  const _emit = (val: number | number[]) => {\n    emit(UPDATE_MODEL_EVENT, val)\n    emit(INPUT_EVENT, val)\n  }\n\n  const valueChanged = () => {\n    if (props.range) {\n      return ![minValue.value, maxValue.value].every(\n        (item, index) => item === initData.oldValue[index]\n      )\n    } else {\n      return props.modelValue !== initData.oldValue\n    }\n  }\n\n  const setValues = () => {\n    if (props.min > props.max) {\n      throwError('Slider', 'min should not be greater than max.')\n      return\n    }\n    const val = props.modelValue\n    if (props.range && Array.isArray(val)) {\n      if (val[1] < props.min) {\n        _emit([props.min, props.min])\n      } else if (val[0] > props.max) {\n        _emit([props.max, props.max])\n      } else if (val[0] < props.min) {\n        _emit([props.min, val[1]])\n      } else if (val[1] > props.max) {\n        _emit([val[0], props.max])\n      } else {\n        initData.firstValue = val[0]\n        initData.secondValue = val[1]\n        if (valueChanged()) {\n          elFormItem.validate?.('change')\n          initData.oldValue = val.slice()\n        }\n      }\n    } else if (!props.range && typeof val === 'number' && !isNaN(val)) {\n      if (val < props.min) {\n        _emit(props.min)\n      } else if (val > props.max) {\n        _emit(props.max)\n      } else {\n        initData.firstValue = val\n        if (valueChanged()) {\n          elFormItem.validate?.('change')\n          initData.oldValue = val\n        }\n      }\n    }\n  }\n\n  setValues()\n\n  watch(\n    () => initData.dragging,\n    (val) => {\n      if (!val) {\n        setValues()\n      }\n    }\n  )\n\n  watch(\n    () => props.modelValue,\n    (val, oldVal) => {\n      if (\n        initData.dragging ||\n        (Array.isArray(val) &&\n          Array.isArray(oldVal) &&\n          val.every((item, index) => item === oldVal[index]) &&\n          initData.firstValue === val[0] &&\n          initData.secondValue === val[1])\n      ) {\n        return\n      }\n      setValues()\n    },\n    {\n      deep: true,\n    }\n  )\n\n  watch(\n    () => [props.min, props.max],\n    () => {\n      setValues()\n    }\n  )\n}\n\nconst useLifecycle = (props, initData, resetSize) => {\n  const sliderWrapper: Ref<Nullable<HTMLElement>> = ref(null)\n\n  onMounted(async () => {\n    let valuetext\n    if (props.range) {\n      if (Array.isArray(props.modelValue)) {\n        initData.firstValue = Math.max(props.min, props.modelValue[0])\n        initData.secondValue = Math.min(props.max, props.modelValue[1])\n      } else {\n        initData.firstValue = props.min\n        initData.secondValue = props.max\n      }\n      initData.oldValue = [initData.firstValue, initData.secondValue]\n      valuetext = `${initData.firstValue}-${initData.secondValue}`\n    } else {\n      if (typeof props.modelValue !== 'number' || isNaN(props.modelValue)) {\n        initData.firstValue = props.min\n      } else {\n        initData.firstValue = Math.min(\n          props.max,\n          Math.max(props.min, props.modelValue)\n        )\n      }\n      initData.oldValue = initData.firstValue\n      valuetext = initData.firstValue\n    }\n\n    sliderWrapper.value.setAttribute('aria-valuetext', valuetext)\n\n    // label screen reader\n    sliderWrapper.value.setAttribute(\n      'aria-label',\n      props.label ? props.label : `slider between ${props.min} and ${props.max}`\n    )\n\n    on(window, 'resize', resetSize)\n\n    await nextTick()\n    resetSize()\n  })\n\n  onBeforeUnmount(() => {\n    off(window, 'resize', resetSize)\n  })\n\n  return {\n    sliderWrapper,\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}